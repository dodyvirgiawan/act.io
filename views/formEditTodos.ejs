<%- include('partials/head', {pageTitle: 'Home'}) %>

<body>
    <%- include('partials/navbar') %>

    <br>
    <div class="container">
        <div class="card">
            <div class="card body">
                <div class="container">
                    <div class="card-body">
                        <form action="/todos/<%= data.id %>/edit" method="POST">
                            <div class="form-group">
                                <label for="name">Edit To do</label>
                                <input type="text" class="form-control" name="name" value="<%= data.name %>">
                            </div>

                            <%- include('partials/formValidationComponent.ejs', {errorValidations, path: 'name', validatorKey: 'notEmpty'}) %>

                            <div class="form-group">
                                <label for="description">Description <small><i>(optional)</i></small></label>
                                <textarea class="form-control" name="description" rows="3"><%= data.description %></textarea>
                            </div>

                            <div class="form-group">
                                <label for="priority">Priority</label>
                                <select class="form-control form-control-lg" name="priority">
                                    <option value="High" <%= data.priority === 'High' ? 'selected' : '' %>>High</option>
                                    <option value="Medium" <%= data.priority === 'Medium' ? 'selected' : '' %>>Medium</option>
                                    <option value="Low" <%= data.priority === 'Low' ? 'selected' : '' %>>Low</option>
                                </select>
                            </div>

                            <%- include('partials/formValidationComponent.ejs', {errorValidations, path: 'priority', validatorKey: 'notEmpty'}) %>

                            <br>
                            <div class="alert alert-danger">
                                <div class="form-group">
                                    <label for="deadline">Deadline</label>
                                    <input type="date" class="form-control" name="deadline" value="<%= formatDateToHTMLInput(data.deadline) %>">
                                </div>
                            </div>

                            <%- include('partials/formValidationComponent.ejs', {errorValidations, path: 'deadline', validatorKey: 'notEmpty'}) %>

                            <br><div class="alert alert-info">
                                <div class="form-group">
                                    <label for="reminder_date">When do you want us to send a reminder?</label>
                                    <input type="date" class="form-control" name="reminder_date" value="<%= formatDateToHTMLInput(data.reminder_date) %>">
                                </div>

                                <%- include('partials/formValidationComponent.ejs', {errorValidations, path: 'reminder_date', validatorKey: 'notEmpty'}) %>
    
                                <div class="form-group">
                                    <label for="reminder_hours">At what time?</label>
                                    <input type="text" class="form-control" name="reminder_hours" value="<%= data.reminder_hours %>"">
                                </div>

                                <%- include('partials/formValidationComponent.ejs', {errorValidations, path: 'reminder_hours', validatorKey: 'notEmpty'}) %>
                                <%- include('partials/formValidationComponent.ejs', {errorValidations, path: 'reminder_hours', validatorKey: 'isValidHour'}) %>

                            </div>
                            <br><button type="submit" class="btn btn-primary" style="color: white">Save</button>&nbsp;&nbsp;<button type="submit" class="btn btn-danger"><a href="/todos/<%= data.id %>/delete" style="color: white">Delete</a></button>&nbsp;&nbsp;<button type="button" class="btn btn-success"><a href="/todos" style="color: black">Cancel</a></button>
                        </form>

                    </div>
                </form>
            </div>
        </div>
    </div>
    <%- include('partials/script') %>
</body>
</html>

